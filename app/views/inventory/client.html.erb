<%= form_tag({controller: "inventory", action: "client"}, method: "get", class: "form-inline", remote: false) do %>
    <div class="form-group">
      <%= label_tag("Make") %>
      <%= select_tag("make", '<option>Toyota</option><option>Honda</option><option>Ford</option>'.html_safe, :class => "form-control") %>
    </div>
    <br/>

    <div class="form-group">
      <%= label_tag(:type, "Type")%>
      <%= select_tag("type", '<option>Sedan</option><option>SUV</option>'.html_safe, :class => "form-control") %>
    </div>
    <br/>


    <div class="form-horizontal">
      <%= label_tag("Optional:") %> &nbsp; &nbsp;
      <%= label_tag(:leather, "Leather Seats") %>
      <%= check_box_tag(:leather) %> &nbsp; &nbsp;
      <%= label_tag(:fourwheeldrive, "Four Wheel Drive") %>
      <%= check_box_tag(:fourwheeldrive) %> &nbsp; &nbsp;
      <%= label_tag(:foglights, "Fog Lights") %>
      <%= check_box_tag(:foglights) %>&nbsp; &nbsp;
      <%= label_tag(:surround, "Surround Sound") %>
      <%= check_box_tag(:surround) %>&nbsp; &nbsp;
      <%= label_tag(:dvd, "DVD Player") %>
      <%= check_box_tag(:dvd) %>&nbsp; &nbsp;
      <%= submit_tag("Search") %>
    </div>

  <% end %>



  <table class="table table-hover table-bordered table-striped table-responsive table-condensed">
    <tr>
      <th></th>
      <th>Rental Price/Day</th>
      <th>Model</th>
      <th>Make</th>
      <th>Type</th>
      <th>Year</th>
      <th>Color</th>
      <th>Miles Per Gallon</th>
      <th></th>
    </tr>


    <% @inventorys.each do |car| %>
        <tr id="<%= car.VIN.to_s %>" class="rowentry">
          <td>+</td>
          <td>$<%= car.RENTALPRICE %></td>
          <td><%= car.MODEL %></td>
          <td><%= car.MAKE %></td>
          <td><%= car.TYPE %></td>
          <td><%= car.YEAR %></td>
          <td><%= car.COLOR %></td>
          <td><%= car.MPG %></td>
          <td><button name="<%= car.VIN.to_s %>" class="rentbutton" type="button">Rent</button></td>
        </tr>
        <tr>
          <td colspan="9"></td>
        </tr>

    <% end %>
  </table>

</div>

<script>

  $('.rentbutton').click(function(){

  });

  $(function() {
    $("td[colspan=9]").hide();
    $("table").click(function(event) {
      event.stopPropagation();
      var $target = $(event.target);
      if ( $target.closest("td").attr("colspan") > 1 ) {
        $target.slideUp();
        $target.closest("tr").prev().find("td:first").html("+");
      } else {
        $target.closest("tr").next().find("td[colspan=9]").slideToggle();
        if ($target.closest("tr").find("td:first").html() == "+"){
          $target.closest("tr").find("td:first").html("-");
          $.ajax({
          type:'GET',
          url:'/inventory/lookupVIN',
          data: { VIN : $target.closest("tr").attr('id')
          },
          success:function(json){
            var t = $target.closest("tr").next().find("td[colspan=9]");

            t.html("<ul><li>Leather Seats: "
            + json.near[0].LEATHER
            + "</li><li>Foglights: "
            + json.near[0].FOGLIGHTS
                +"</li><li>Four Wheel Drive: "
            + json.near[0].FWD
            + "</li><li>DVD Player: "
            + json.near[0].DVD
            + "</li><li>Surround Sound: "
            + json.near[0].SURROUND
            +"</li></ul>");
          }
        });}
        else
          $target.closest("tr").find("td:first").html("+");
      }
    });
  });

/*
  $('tr.rowentry').on('click', function() {
    $.ajax({
      type:'GET',
      url:'/inventory/lookupVIN',
      data: { VIN : $(this).attr('id')
       },
    success:function(json){
      //I assume you want to do something on controller action execution success?
      alert(JSON.stringify(json.near[0]));
    }
  });

  });*/
</script>